(()=>{var e={};e.id=74,e.ids=[74],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},98216:e=>{"use strict";e.exports=require("net")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},95346:e=>{"use strict";e.exports=require("timers")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},1288:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>x,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>l,staticGenerationAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{POST:()=>u});var a=r(49303),i=r(88716),o=r(60670),n=r(87070);async function u(e){try{let{userId:t,paymentId:s,amount:a}=await e.json();if(!t||!s)return n.NextResponse.json({message:"Missing required fields"},{status:400});let i=process.env.DB_HOST,o=process.env.DB_USER,u=process.env.DB_PASSWORD,c=process.env.DB_NAME;if(!i||!o||!u||!c)return console.error("[AUTORENEW] Database configuration incomplete"),n.NextResponse.json({message:"Database configuration error"},{status:500});let p=r(73785),d=await p.createConnection({host:i,user:o,password:u,database:c,waitForConnections:!0,connectionLimit:1,queueLimit:0});try{return await d.execute(`INSERT INTO autorenew_purchases (user_id, payment_id, is_active, created_at, last_renewed_at) 
         VALUES (?, ?, TRUE, NOW(), NOW())
         ON DUPLICATE KEY UPDATE is_active = TRUE, last_renewed_at = NOW()`,[t,s]),console.log(`[AUTORENEW] Purchase activated for user ${t}`),n.NextResponse.json({message:"AutoRenew purchase activated successfully",userId:t,paymentId:s},{status:200})}finally{await d.end()}}catch(e){return console.error("[AUTORENEW ACTIVATION] Error:",e instanceof Error?e.message:String(e)),n.NextResponse.json({message:"Failed to activate AutoRenew purchase"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/activate-autorenew/route",pathname:"/api/admin/activate-autorenew",filename:"route",bundlePath:"app/api/admin/activate-autorenew/route"},resolvedPagePath:"/var/www/buydaocoins.aethexiz.com/app/api/admin/activate-autorenew/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:l}=c,m="/api/admin/activate-autorenew/route";function x(){return(0,o.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972,785],()=>r(1288));module.exports=s})();