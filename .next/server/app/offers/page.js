(()=>{var e={};e.id=845,e.ids=[845],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},90687:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>o}),s(21240),s(51371),s(35866);var r=s(23191),a=s(88716),n=s(37922),i=s.n(n),l=s(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["offers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,21240)),"/var/www/buydaocoins.aethexiz.com/app/offers/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,51371)),"/var/www/buydaocoins.aethexiz.com/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/var/www/buydaocoins.aethexiz.com/app/offers/page.tsx"],x="/offers/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/offers/page",pathname:"/offers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},57669:(e,t,s)=>{Promise.resolve().then(s.bind(s,92437))},92437:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(10326),a=s(35047),n=s(17577),i=s(46226),l=s(37865),c=s(19245),o=s(78584),d=s(52948),x=s(68952),m=s(84139);let p=[{id:"pkg1",name:"Starter",coins:50,price:40,regular:50,discount:20},{id:"pkg2",name:"Popular",coins:100,price:80,regular:100,discount:20,badge:"POPULAR"},{id:"pkg3",name:"Great Value",coins:150,price:125,regular:150,discount:17,badge:"BEST VALUE"},{id:"pkg4",name:"Ultimate",coins:200,price:150,regular:200,discount:25}];function u(){let{isAuthenticated:e,isLoading:t,discordId:s,server:u}=(0,m.a)(),h=(0,a.useRouter)(),[g,f]=(0,n.useState)({}),[j,b]=(0,n.useState)("idle"),[v,y]=(0,n.useState)(""),[w,N]=(0,n.useState)(0);if(t)return r.jsx("div",{className:"h-screen flex items-center justify-center",children:r.jsx("div",{className:"spinner"})});if(!e)return h.push("/"),null;let P=e=>{f(t=>{if(t[e]){let{[e]:s,...r}=t;return r}return{...t,[e]:1}})},k=(e,t)=>{f(s=>{let r=(s[e]||0)+t;if(r<=0){let{[e]:t,...r}=s;return r}return{...s,[e]:r}})},C=Object.entries(g).map(([e,t])=>({...p.find(t=>t.id===e),qty:t})),_=C.reduce((e,t)=>e+t.price*t.qty,0),S=C.reduce((e,t)=>e+t.coins*t.qty,0),q=C.reduce((e,t)=>e+(t.regular-t.price)*t.qty,0),O=async()=>{let e=await fetch("/api/paypal/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:_,couponCode:null,packages:C,discordId:s,server:u})}),t=await e.json();if(!e.ok)throw Error(t.error);return t.orderId},T=async e=>{b("processing");try{let t=await fetch("/api/paypal/capture-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.orderID,discordId:s,server:u})}),r=await t.json();if(!t.ok)throw Error(r.error);N(r.daoCoins),b("success"),setTimeout(()=>h.push(`/success?coins=${r.daoCoins}&txId=${r.transactionId}`),2500)}catch(e){y(e.message),b("error")}};return"processing"===j?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"glass rounded-2xl p-8 text-center max-w-sm w-full",children:[r.jsx("div",{className:"w-40 h-40 mx-auto mb-4",children:r.jsx(c.ZP,{animationData:o,loop:!0})}),r.jsx("h2",{className:"text-xl font-bold text-blue-400",children:"Processing Payment"})]})}):"success"===j?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"glass rounded-2xl p-8 text-center max-w-sm w-full",children:[r.jsx("div",{className:"w-48 h-48 mx-auto",children:r.jsx(c.ZP,{animationData:d,loop:!1})}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,r.jsxs)("span",{className:"text-3xl font-bold text-amber-400",children:["+",w]}),r.jsx(i.default,{src:"/dao-coin.png",alt:"DC",width:28,height:28})]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Redirecting..."})]})}):"error"===j?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"glass rounded-2xl p-8 text-center max-w-sm w-full",children:[r.jsx("div",{className:"w-40 h-40 mx-auto mb-4",children:r.jsx(c.ZP,{animationData:x,loop:!1})}),r.jsx("h2",{className:"text-xl font-bold text-red-400",children:"Payment Failed"}),r.jsx("p",{className:"text-gray-400 text-sm mt-2 mb-4",children:v}),r.jsx("button",{onClick:()=>{b("idle"),y("")},className:"bg-amber-500 hover:bg-amber-600 text-slate-900 font-bold py-3 px-6 rounded-xl",children:"Try Again"})]})}):r.jsx("div",{className:"min-h-screen p-4 pb-24 md:pb-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("button",{onClick:()=>h.push("/shop"),className:"text-gray-400 hover:text-white text-sm",children:"← Back"}),r.jsx("h1",{className:"text-xl font-bold text-amber-400",children:"Special Offers"}),r.jsx("div",{className:"w-12"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:p.map(e=>{let t=g[e.id]||0,s=t>0;return(0,r.jsxs)("div",{onClick:()=>P(e.id),className:`relative glass rounded-xl p-4 cursor-pointer transition-all ${s?"ring-2 ring-amber-400":"hover:bg-white/5"}`,children:[e.badge&&r.jsx("div",{className:`absolute -top-2 left-1/2 -translate-x-1/2 text-white text-[10px] font-bold px-2 py-0.5 rounded-full ${"POPULAR"===e.badge?"bg-purple-500":"bg-green-500"}`,children:e.badge}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-amber-400 flex items-center justify-center gap-1",children:[e.coins," ",r.jsx(i.default,{src:"/dao-coin.png",alt:"DC",width:20,height:20})]}),(0,r.jsxs)("div",{className:"text-lg font-bold text-white",children:["$",e.price]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-1 text-xs",children:[(0,r.jsxs)("span",{className:"text-gray-500 line-through",children:["$",e.regular]}),(0,r.jsxs)("span",{className:"text-red-400 font-bold",children:["-",e.discount,"%"]})]})]}),s&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-white/10 flex items-center justify-center gap-3",onClick:e=>e.stopPropagation(),children:[r.jsx("button",{onClick:()=>k(e.id,-1),className:"w-7 h-7 bg-white/10 hover:bg-white/20 rounded-lg font-bold",children:"-"}),r.jsx("span",{className:"text-white font-bold w-6 text-center",children:t}),r.jsx("button",{onClick:()=>k(e.id,1),className:"w-7 h-7 bg-white/10 hover:bg-white/20 rounded-lg font-bold",children:"+"})]})]},e.id)})}),C.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"glass rounded-xl p-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-400",children:"Packages"}),r.jsx("span",{className:"text-white",children:C.map(e=>`${e.name} \xd7${e.qty}`).join(", ")})]}),q>0&&(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-400",children:"You Save"}),(0,r.jsxs)("span",{className:"text-green-400 font-bold",children:["$",q]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-white/10",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-white font-bold text-lg",children:["$",_]}),r.jsx("div",{className:"text-gray-500 text-xs",children:"Total"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-2xl font-bold text-amber-400",children:[S," ",r.jsx(i.default,{src:"/dao-coin.png",alt:"DC",width:24,height:24})]})]})]}),r.jsx("div",{className:"rounded-xl overflow-hidden mb-4",children:r.jsx(l.ch,{createOrder:O,onApprove:T,onError:e=>{console.error(e),y("Payment failed"),b("error")},style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal"}})})]}),0===C.length&&r.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"Tap a package to select it"}),r.jsx("p",{className:"text-center text-gray-500 text-xs",children:"✓ Instant delivery • ✓ Secure payment"})]})})}},21240:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/var/www/buydaocoins.aethexiz.com/app/offers/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,252,245,378,470],()=>s(90687));module.exports=r})();