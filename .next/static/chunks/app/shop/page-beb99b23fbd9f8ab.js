(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{5229:function(e,s,t){Promise.resolve().then(t.bind(t,2984))},2984:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),l=t(2265),r=t(9376),n=t(3145),i=t(7648),c=t(6631);function d(){var e,s;let{isAuthenticated:t,isLoading:d,discordId:o,server:x}=(0,c.a)(),h=(0,r.useRouter)(),[u,m]=(0,l.useState)(null),[f,p]=(0,l.useState)(null),[g,j]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{let e=async()=>{if(!t||!o){j(!1);return}try{let[e,s]=await Promise.all([fetch("/api/subscriptions/status?discordId=".concat(o,"&server=").concat(x||"S0")),fetch("/api/autorenew/check-purchase?discordId=".concat(o,"&server=").concat(x||"S0"))]);if(e.ok){let s=await e.json();m(s)}if(s.ok){let e=await s.json();p(e)}}catch(e){console.error("Error fetching statuses:",e)}finally{j(!1)}};t&&e()},[t,o,x]),d)return(0,a.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 animate-fade-in",children:[(0,a.jsx)("div",{className:"spinner"}),(0,a.jsx)("div",{className:"text-base md:text-lg text-amber-400 font-medium",children:"Loading..."})]})});if(!t)return(0,a.jsx)("div",{className:"h-screen flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"w-full max-w-sm animate-scale-in",children:(0,a.jsxs)("div",{className:"glass rounded-2xl p-6 shadow-2xl text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-amber-400 mb-3",children:"Sign In Required"}),(0,a.jsx)("p",{className:"text-gray-300 mb-5 text-sm",children:"Please sign in to access the shop"}),(0,a.jsx)("button",{onClick:()=>h.push("/"),className:"w-full bg-[#5865F2] hover:bg-[#4752C4] text-white font-semibold py-3 px-5 rounded-xl transition-all",children:"Go to Login"})]})})});let v=null==u?void 0:u.hasActiveSubscription,N=null==f?void 0:f.hasPurchased;return(0,a.jsx)("div",{className:"min-h-screen p-4 pb-24 md:pb-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("button",{onClick:()=>h.push("/"),className:"text-gray-400 hover:text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{children:"←"})," Back"]}),(0,a.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-amber-400",children:"Shop"}),(0,a.jsx)("div",{className:"w-16"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(i.default,{href:"/shop/subscriptions",className:"block",children:(0,a.jsxs)("div",{className:"glass rounded-2xl p-4 transition-all hover:shadow-lg hover:shadow-purple-500/20 active:scale-[0.98] ".concat(v?"border border-green-500/30":""),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 shrink-0 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center text-xl",children:"\uD83D\uDD2E"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("h3",{className:"text-base font-bold text-white",children:"Subscription"}),v&&(0,a.jsx)("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:"ACTIVE"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-xs truncate",children:v?"+".concat(null==u?void 0:null===(e=u.subscription)||void 0===e?void 0:e.qi_boost_percent,"% Qi Boost"):"Boost Qi by 100-800%"})]}),(0,a.jsxs)("div",{className:"text-right shrink-0",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-amber-400",children:"$5+"}),(0,a.jsx)("div",{className:"text-gray-500 text-[10px]",children:"/month"})]})]}),v&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-white/10 flex items-center justify-between text-xs",children:[(0,a.jsxs)("span",{className:"text-gray-400",children:["Exp: ",new Date((null==u?void 0:null===(s=u.subscription)||void 0===s?void 0:s.expires_at)||"").toLocaleDateString()]}),(0,a.jsx)("span",{className:"text-purple-400 font-medium",children:"Manage →"})]})]})}),(0,a.jsx)(i.default,{href:"/shop/autorenew",className:"block",children:(0,a.jsx)("div",{className:"glass rounded-2xl p-4 transition-all hover:shadow-lg hover:shadow-blue-500/20 active:scale-[0.98] ".concat(N?"border border-green-500/30":""),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 shrink-0 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center text-xl",children:"⚙️"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("h3",{className:"text-base font-bold text-white",children:"AutoRenew"}),N&&(0,a.jsx)("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:"OWNED"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-xs truncate",children:N?"Use /autorenew in Discord":"Auto-activate pills & boosts"})]}),(0,a.jsx)("div",{className:"text-right shrink-0",children:N?(0,a.jsx)("div",{className:"text-green-400 font-bold text-sm",children:"Owned"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-amber-400",children:"$5"}),(0,a.jsx)("div",{className:"text-gray-500 text-[10px]",children:"one-time"})]})})]})})}),(0,a.jsx)(i.default,{href:"/payment",className:"block",children:(0,a.jsx)("div",{className:"glass rounded-2xl p-4 transition-all hover:shadow-lg hover:shadow-amber-500/20 active:scale-[0.98]",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 shrink-0 rounded-xl bg-gradient-to-br from-amber-500 to-yellow-600 flex items-center justify-center",children:(0,a.jsx)(n.default,{src:"/dao-coin.png",alt:"DC",width:28,height:28})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-base font-bold text-white",children:"DAO Coins"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs truncate",children:"Buy coins for in-game shop"})]}),(0,a.jsxs)("div",{className:"text-right shrink-0",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-amber-400",children:"$1=1"}),(0,a.jsx)("div",{className:"text-gray-500 text-[10px]",children:"DC"})]})]})})}),(0,a.jsx)(i.default,{href:"/offers",className:"block",children:(0,a.jsx)("div",{className:"glass rounded-2xl p-4 transition-all hover:shadow-lg hover:shadow-red-500/20 active:scale-[0.98] border border-red-500/30",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 shrink-0 rounded-xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center text-xl",children:"\uD83C\uDF81"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("h3",{className:"text-base font-bold text-white",children:"Offers"}),(0,a.jsx)("span",{className:"bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full animate-pulse",children:"SALE"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-xs truncate",children:"Bulk packages up to 25% off"})]}),(0,a.jsx)("div",{className:"text-right shrink-0",children:(0,a.jsx)("div",{className:"text-base font-bold text-green-400",children:"-25%"})})]})})})]}),(0,a.jsx)("div",{className:"mt-6 glass rounded-2xl p-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 text-xs text-gray-400 justify-center",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-green-400",children:"✓"})," Instant delivery"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-green-400",children:"✓"})," Secure PayPal"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-amber-400",children:"•"})," Final sales"]})]})})]})})}},6631:function(e,s,t){"use strict";t.d(s,{a:function(){return r}});var a=t(605),l=t(2265);function r(){let{data:e,status:s}=(0,a.useSession)(),[t,r]=(0,l.useState)(null),[n,i]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{{let e=localStorage.getItem("codeAuth");if(e)try{r(JSON.parse(e))}catch(e){localStorage.removeItem("codeAuth")}i(!0)}},[]),null==e?void 0:e.user)?{isAuthenticated:!0,isLoading:!1,discordId:e.user.id||null,server:"S0",userName:e.user.name||null,userImage:e.user.image||null,isCodeAuth:!1,logout:()=>{}}:t?{isAuthenticated:!0,isLoading:!1,discordId:t.discordId,server:t.server,userName:null,userImage:null,isCodeAuth:!0,logout:()=>{t&&(localStorage.removeItem("codeAuth"),r(null),window.location.reload())}}:{isAuthenticated:!1,isLoading:"loading"===s||!n,discordId:null,server:null,userName:null,userImage:null,isCodeAuth:!1,logout:()=>{}}}},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[605,145,648,971,117,744],function(){return e(e.s=5229)}),_N_E=e.O()}]);