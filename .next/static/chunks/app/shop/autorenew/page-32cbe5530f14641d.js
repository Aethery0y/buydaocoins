(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{4303:function(e,s,t){Promise.resolve().then(t.bind(t,9010))},9010:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var a=t(7437),r=t(9376),n=t(2265),l=t(6631);function i(){let{isAuthenticated:e,isLoading:s,discordId:t,server:i}=(0,l.a)(),c=(0,r.useRouter)(),[o,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(""),[x,h]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{t?fetch("/api/autorenew/check-purchase?discordId=".concat(t,"&server=").concat(i)).then(e=>e.json()).then(e=>h(e.hasPurchased||!1)).catch(console.error).finally(()=>v(!1)):v(!1)},[t,i]),s)return(0,a.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"spinner"})});if(!e)return c.push("/"),null;let N=async()=>{d(!0),m("");try{let e=await fetch("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"autorenew",amount:5,description:"AutoRenew Feature",discordId:t,server:i})});if(!e.ok)throw Error("Failed to create order");let s=await e.json();s.approvalUrl&&(window.location.href=s.approvalUrl)}catch(e){m(e.message)}finally{d(!1)}};return(0,a.jsx)("div",{className:"min-h-screen p-4 pb-24 md:pb-8",children:(0,a.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("button",{onClick:()=>c.push("/shop"),className:"text-gray-400 hover:text-white text-sm",children:"← Back"}),(0,a.jsx)("h1",{className:"text-xl font-bold text-amber-400",children:"AutoRenew"}),(0,a.jsx)("div",{className:"w-12"})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-5 mb-4 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"⚙️"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-1",children:"AutoRenew"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:"Never miss a boost again"}),x?(0,a.jsxs)("div",{className:"bg-green-500/20 border border-green-500 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-green-400 font-bold text-lg",children:"✓ Already Owned"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Use /autorenew in Discord to manage"})]}):(0,a.jsx)("div",{className:"text-3xl font-bold text-amber-400",children:"$5.00"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:"One-time purchase • Forever access"})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-4 mb-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-3 font-medium",children:"What You Get"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-amber-400",children:"⚡"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white text-sm font-medium",children:"Auto-Activate Pills"}),(0,a.jsx)("div",{className:"text-gray-500 text-xs",children:"Uses your highest-rank pills automatically"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-amber-400",children:"\uD83D\uDD0B"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white text-sm font-medium",children:"Auto-Activate Qi Boosts"}),(0,a.jsx)("div",{className:"text-gray-500 text-xs",children:"Never miss a boost opportunity"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"text-amber-400",children:"⏱️"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white text-sm font-medium",children:"24/7 Active"}),(0,a.jsx)("div",{className:"text-gray-500 text-xs",children:"Works while you're offline"})]})]})]})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-4 mb-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2 font-medium",children:"How It Works"}),(0,a.jsxs)("ol",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("li",{className:"text-gray-300",children:[(0,a.jsx)("span",{className:"text-amber-400",children:"1."})," Purchase AutoRenew"]}),(0,a.jsxs)("li",{className:"text-gray-300",children:[(0,a.jsx)("span",{className:"text-amber-400",children:"2."})," Stock pills & qi boosts in your inventory"]}),(0,a.jsxs)("li",{className:"text-gray-300",children:[(0,a.jsx)("span",{className:"text-amber-400",children:"3."})," Use /autorenew in Discord to enable"]})]})]}),u&&(0,a.jsx)("div",{className:"bg-red-500/20 border border-red-500 text-red-400 p-3 rounded-lg mb-4 text-sm",children:u}),!x&&(0,a.jsx)("button",{onClick:N,disabled:o||g,className:"w-full py-4 rounded-xl font-bold text-white text-lg transition-all ".concat(o||g?"bg-gray-600":"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700"),children:g?"Checking...":o?"Processing...":"Buy AutoRenew - $5.00"}),(0,a.jsx)("p",{className:"text-center text-gray-500 text-xs mt-4",children:"Secure payment via PayPal"})]})})}},6631:function(e,s,t){"use strict";t.d(s,{a:function(){return n}});var a=t(605),r=t(2265);function n(){let{data:e,status:s}=(0,a.useSession)(),[t,n]=(0,r.useState)(null),[l,i]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{{let e=localStorage.getItem("codeAuth");if(e)try{n(JSON.parse(e))}catch(e){localStorage.removeItem("codeAuth")}i(!0)}},[]),null==e?void 0:e.user)?{isAuthenticated:!0,isLoading:!1,discordId:e.user.id||null,server:"S0",userName:e.user.name||null,userImage:e.user.image||null,isCodeAuth:!1,logout:()=>{}}:t?{isAuthenticated:!0,isLoading:!1,discordId:t.discordId,server:t.server,userName:null,userImage:null,isCodeAuth:!0,logout:()=>{t&&(localStorage.removeItem("codeAuth"),n(null),window.location.reload())}}:{isAuthenticated:!1,isLoading:"loading"===s||!l,discordId:null,server:null,userName:null,userImage:null,isCodeAuth:!1,logout:()=>{}}}},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=4303)}),_N_E=e.O()}]);